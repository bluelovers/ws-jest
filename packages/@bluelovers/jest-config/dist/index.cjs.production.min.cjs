"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@yarn-tool/require-resolve"),t=require("path"),s=require("os"),r=require("debug-color2"),o=require("graceful-fs"),n=require("@yarn-tool/table"),i=require("util");function _requireResolve(t){const s=[e.requireResolveExtra("@bluelovers/tsdx").result,e.requireResolveExtra("tsdx").result].filter(Boolean),o=e.requireResolveCore(t,{includeGlobal:!0,includeCurrentDirectory:!0,paths:s});return r.console.debug("[require.resolve]",t,"=>",o),o}function getCacheDirectory(){const{getuid:e}=process,r=process.env.JEST_CACHE_DIRECTORY||t.join(function tryRealpath(e){try{e=o.realpathSync.native(e)}catch(e){if("ENOENT"!==e.code)throw e}return e}(s.tmpdir()),"jest");return null==e?r:`${r}_${e.call(process).toString(36)}`}function makeTestRegexConfig(e){return{testMatch:void 0,testRegex:[`\\.(tests?|spec)\\.(${e=[e].flat().join("|")})$`,`__tests__/.*\\.(tests?|spec)\\.(${e})$`]}}function fixJestConfig(e){return e.testMatch?e.testRegex=void 0:e.testRegex&&(e.testMatch=void 0),e}function defaultTransform(){let t=_requireResolve("ts-jest");const{result:s}=e.requireResolveExtra("jest-tsd-transform");if(null!=s&&s.length){const{result:r}=e.requireResolveExtra("jest-chain-transform");null!=r&&r.length&&(t=[r,{transformers:[s,t]}])}return{".(ts|tsx|mts|cts)$":t}}function _newTableBorderless(e){let t=new n.Table({colAligns:["right","left"],chars:{top:"","top-mid":"","top-left":"","top-right":"",bottom:"","bottom-mid":"","bottom-left":"","bottom-right":"",left:"","left-mid":"",mid:"","mid-mid":"",right:"","right-mid":"",middle:""},...e});return t=n.applyStyleBorderless(t),t}function printJestConfigInfo(e,t){var s,o,n,l,u,_,a,c;const f=_newTableBorderless();null!==(s=t)&&void 0!==s||(t={}),null!==(o=e)&&void 0!==o||(e={}),f.push(["@bluelovers/jest-config:","1.0.15"]),f.push(["process.versions.node:",process.versions.node]),f.push(["cwd:",null!==(n=t.cwd)&&void 0!==n?n:process.cwd()]),(null===(l=t.file)||void 0===l?void 0:l.length)&&f.push(["file:",t.file]),(null===(u=e.cacheDirectory)||void 0===u?void 0:u.length)&&f.push(["cacheDirectory:",e.cacheDirectory]),(null===(_=e.rootDir)||void 0===_?void 0:_.length)&&f.push(["rootDir:",e.rootDir]),(null===(a=e.roots)||void 0===a?void 0:a.length)&&f.push(["roots:",i.inspect(e.roots)]),(null===(c=e.preset)||void 0===c?void 0:c.length)&&f.push(["preset:",e.preset]),e.transform&&f.push(["transform:",i.inspect(e.transform,{depth:3})]),r.console.gray.log("─".repeat(20)),r.console.log("jest.config"),r.console.log(f.toString()),r.console.gray.log("─".repeat(20))}const l=getCacheDirectory();function mixinJestConfig(e,t,s){var r;null!==(r=e)&&void 0!==r||(e={});const o=fixJestConfig({globals:{"ts-jest":{}},cacheDirectory:l,maxWorkers:1,clearMocks:!0,passWithNoTests:!0,moduleFileExtensions:["ts","tsx","mts","cts","js","jsx","mjs","cjs","json","node"],testEnvironment:"node",...makeTestRegexConfig(["ts","tsx","mts","cts"]),testPathIgnorePatterns:["/node_modules/","/__fixtures__/","/__file_snapshots__/","/fixtures/","/__tests__/helpers/","/__tests__/utils/","__mocks__","/dist/"],setupFilesAfterEnv:[],transform:defaultTransform(),verbose:!0,coverageProvider:"v8",collectCoverage:!1,coveragePathIgnorePatterns:["/node_modules/","/__snapshots__/","/__tests__/","/__test__/","/dist/","/test/","/fixture/","/__file_snapshots__/","/__fixtures__/"],...e});return t&&printJestConfigInfo(o,s),o}exports._newTableBorderless=_newTableBorderless,exports._requireResolve=_requireResolve,exports.cacheDirectory=l,exports.default=mixinJestConfig,exports.defaultCoveragePathIgnorePatterns=function defaultCoveragePathIgnorePatterns(){return["/node_modules/","/__snapshots__/","/__tests__/","/__test__/","/dist/","/test/","/fixture/","/__file_snapshots__/","/__fixtures__/"]},exports.defaultModuleFileExtensions=function defaultModuleFileExtensions(){return["ts","tsx","mts","cts","js","jsx","mjs","cjs","json","node"]},exports.defaultTestFileExtensions=function defaultTestFileExtensions(){return["ts","tsx","mts","cts"]},exports.defaultTestPathIgnorePatterns=function defaultTestPathIgnorePatterns(){return["/node_modules/","/__fixtures__/","/__file_snapshots__/","/fixtures/","/__tests__/helpers/","/__tests__/utils/","__mocks__","/dist/"]},exports.defaultTransform=defaultTransform,exports.fixJestConfig=fixJestConfig,exports.getCacheDirectory=getCacheDirectory,exports.makeTestRegexConfig=makeTestRegexConfig,exports.mixinJestConfig=mixinJestConfig,exports.printJestConfigInfo=printJestConfigInfo;
//# sourceMappingURL=index.cjs.production.min.cjs.map
